apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: {{ .Namespace }}

commonLabels:
  build: {{ .CommitSHA }}

commonAnnotations:
  githubUrl: {{ .GithubUrl }}

{{ if .ImagesReplace -}}
images:
{{- range $Name, $NewTag := .ImagesReplace }}
  - name: {{ $Name }}
    newTag: {{ $NewTag -}}
{{ end }}
{{- end }}

resources:
  - application.yaml
  - namespace.yaml
  - resourceQuota.yaml
